/*----------------------------------------*/
/*  Section Card Layout
/*  Modern card-based docs builder UI.
/*----------------------------------------*/

// ==========================================================
//  SECTION LIST – container for all section cards
// ==========================================================
.ezd-section-list {
	display: flex;
	flex-direction: column;
	gap: 12px;
	margin-top: 16px;
	margin-bottom: 24px;
}

.ezd-section-card {
	background: #fff;
	border: 1px solid #e2e8f0;
	border-radius: 12px;
	overflow: hidden;
	box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
	transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);

	&:hover {
		border-color: #cbd5e1;
		box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.025);
	}

	&.dd-is-dragging {
		opacity: 0.4;
		box-shadow: none;
		transform: none;
	}
}

// ==========================================================
//  SECTION HEADER – top bar of each card
// ==========================================================
.ezd-section-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 16px 20px;
	gap: 16px;
	border-bottom: 1px solid transparent;
	transition: border-color 0.2s ease;
	background-color: #f7f4f442;
}

.ezd-section-card:not(.ezd-section-collapsed) .ezd-section-header {
	border-bottom-color: #f1f5f9;
}

.ezd-section-header-left {
	display: flex;
	align-items: center;
	gap: 12px;
	flex: 1;
	min-width: 0;
}

// Drag handle – 6-dot grip
.ezd-section-drag-handle {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	cursor: grab;
	color: #94a3b8;
	flex-shrink: 0;
	border-radius: 6px;
	transition: all 0.2s ease;

	&:hover {
		color: var(--ezd-drag-handle-hover-color, #4f46e5);
		background: #f1f5f9;
	}

	&:active {
		cursor: grabbing;
		background: #e2e8f0;
	}
}

// Collapse/expand chevron button
.ezd-section-collapse-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	padding: 0;
	border: none;
	background: transparent;
	cursor: pointer;
	color: #64748b;
	border-radius: 6px;
	flex-shrink: 0;
	transition: all 0.2s ease;

	&:hover {
		color: #1e293b;
		background: #f1f5f9;
	}

	&:focus {
		outline: none;
		box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);
	}
}

.ezd-section-chevron {
	transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);

	&.ezd-chevron-collapsed {
		transform: rotate(-90deg);
	}
}

// Numbered badge
.ezd-section-number {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	min-width: 28px;
	height: 28px;
	padding: 0 8px;
	background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
	color: #4338ca;
	font-size: 13px;
	font-weight: 700;
	border-radius: 8px;
	flex-shrink: 0;
	line-height: 1;
	box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.4);
}

// Section title
.ezd-section-title-text {
	font-size: 16px;
	font-weight: 600;
	color: #0f172a;
	margin: 0;
	line-height: 1.4;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	flex: 0 1 auto;
	transition: color 0.2s ease;

	a {
		color: inherit;
		text-decoration: none;
		transition: color 0.2s ease;

		&:hover {
			color: #4f46e5;
		}
	}
}

// Header action icons (right side)
.ezd-section-header-actions {
	display: flex;
	align-items: center;
	gap: 6px;
	flex-shrink: 0;
	opacity: 0;
	transform: translateX(8px);
	transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.ezd-section-header:hover .ezd-section-header-actions {
	opacity: 1;
}

.ezd-header-action-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 34px;
	height: 34px;
	border-radius: 8px;
	color: #94a3b8;
	text-decoration: none;
	background: transparent;
	transition: all 0.2s ease;

	&:hover {
		color: #1e293b;
		background: #f1f5f9;
		transform: scale(1.05);
	}

	&.ezd-header-action-delete:hover {
		color: #ef4444;
		background: #fef2f2;
	}
}

// ==========================================================
//  SECTION BODY – children area
// ==========================================================
.ezd-section-body {
	padding: 12px 16px 16px;
	background: #f8fafc;
	border-radius: 0 0 12px 12px;
}

// ==========================================================
//  CHILD ROW – each depth-2+ item
// ==========================================================
.ezd-child-row {
	border-radius: 8px;
	transition: all 0.2s ease;
	position: relative;
	background: #ffffff;
	border: 1px solid transparent;
	margin-bottom: 4px;

	&::before {
		content: '';
		position: absolute;
		left: 0;
		top: 50%;
		transform: translateY(-50%);
		height: 0;
		width: 3px;
		background: #6366f1;
		border-radius: 0 4px 4px 0;
		transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
		opacity: 0;
	}

	&:hover {
		background: #ffffff;
		border-color: #e2e8f0;
		box-shadow: 0 2px 4px rgba(0,0,0,0.03);
		transform: translateX(2px);
		
		&::before {
			height: 60%;
			opacity: 1;
		}
	}

	&.dd-is-dragging {
		opacity: 0.4;
		transform: none;
	}
}

.ezd-child-row-inner {
	display: flex;
	align-items: center;
	padding: 12px 14px;
	gap: 12px;
	min-height: 46px;
}

// Child drag handle
.ezd-child-drag-handle {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 24px;
	height: 24px;
	cursor: grab;
	color: #cbd5e1;
	flex-shrink: 0;
	opacity: 0;
	border-radius: 4px;
	transform: scale(0.9);
	transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

	&:hover {
		color: var(--ezd-drag-handle-hover-color, #4f46e5);
		background: #f1f5f9;
	}

	&:active {
		cursor: grabbing;
	}
}

.ezd-child-row:hover .ezd-child-drag-handle {
	opacity: 1;
	transform: scale(1);
}

// Status dot indicator
.ezd-status-dot {
	display: inline-block;
	width: 10px;
	height: 10px;
	border-radius: 50%;
	flex-shrink: 0;
	box-shadow: 0 0 0 2px #ffffff;
}

.ezd-dot-publish {
	background: #3b82f6;
}

.ezd-dot-private {
	background: #f59e0b;
}

.ezd-dot-protected {
	background: #8b5cf6;
}

.ezd-dot-draft {
	background: #9ca3af;
}

// Child title
.ezd-child-title {
	flex: 0 1 auto;
	font-size: 14px;
	color: #374151;
	line-height: 1.4;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;

	a {
		color: inherit;
		text-decoration: none;

		&:hover {
			color: #3b6de0;
		}
	}
}

// Child hover actions
.ezd-child-actions {
	display: flex;
	align-items: center;
	gap: 4px;
	flex-shrink: 0;
	opacity: 0;
	transition: opacity 0.15s ease;
}

.ezd-child-row:hover .ezd-child-actions {
	opacity: 1;
}

.ezd-inline-action {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	border-radius: 4px;
	color: #9ca3af;
	text-decoration: none;
	transition: color 0.15s ease, background 0.15s ease;

	.dashicons {
		font-size: 16px;
		width: 16px;
		height: 16px;
	}

	&:hover {
		color: #374151;
		background: #f3f4f6;
	}

	&.ezd-inline-action-delete:hover {
		color: #dc2626;
		background: #fef2f2;
	}

	&.eazydocs-pro-notice {
		.dashicons {
			color: #f1bd6c;
		}
	}
}

// Nested children indentation
.ezd-child-nested {
	padding-left: 24px;
}

// ==========================================================
//  COLLAPSED STATE
// ==========================================================
.ezd-section-collapsed {
	.ezd-section-body {
		display: none;
	}
}

.ezd-child-collapsed {
	.ezd-child-nested {
		display: none;
	}
}

// ==========================================================
//  ADD SUB-LESSON BUTTON
// ==========================================================
.ezd-add-sub-lesson-btn {
	display: inline-flex;
	align-items: center;
	gap: 6px;
	padding: 8px 16px;
	background: #fff;
	border: 1px solid #d1d5db;
	border-radius: 8px;
	color: #374151;
	font-size: 13px;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.15s ease;
	margin-top: 4px;

	&:hover {
		border-color: #9ca3af;
		background: #f9fafb;
		color: #111827;
	}

	&:focus {
		outline: none;
		box-shadow: 0 0 0 3px rgba(76, 76, 241, 0.12);
		border-color: var(--clr-blue, #4c4cf1);
	}

	&:active {
		transform: scale(0.98);
	}
}

.ezd-add-sub-lesson-icon {
	font-size: 16px;
	font-weight: 400;
	line-height: 1;
	color: #6b7280;
}

// ==========================================================
//  DRAG STATES FOR SECTION CARDS
// ==========================================================
body.ezd-is-dragging {
	.ezd-section-header-actions,
	.ezd-child-actions {
		opacity: 0 !important;
	}

	.ezd-child-row:hover {
		background: transparent;
	}

	.ezd-section-card:hover {
		border-color: #e2e6ea;
		box-shadow: none;
	}
}

// ==========================================================
//  RTL SUPPORT
// ==========================================================
body.rtl {
	.ezd-section-header-left {
		flex-direction: row-reverse;
	}

	.ezd-child-nested {
		padding-left: 0;
		padding-right: 24px;
	}

	.ezd-section-header-actions {
		flex-direction: row-reverse;
	}
}
