(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,o=window.wp.blockEditor,n=window.wp.components,a=window.wp.richText,l="eazydocs/eazydocs-toolbar";(0,a.registerFormatType)(l,{title:(0,t.__)("EazyDocs Toolbar","eazydocs"),tagName:"span",className:"eazydocs-toolbar",edit:c=>{let{isActive:r,value:i,onChange:s}=c;const[d,m]=(0,e.useState)(!1),[p,u]=(0,e.useState)(""),[w,_]=(0,e.useState)(1),y=eazydocs_local_object.ezd_get_conditional_items.map((t=>(0,e.createElement)("option",{key:t.id,value:t.value},t.title)));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.BlockControls,null,(0,e.createElement)(n.ToolbarGroup,null,(0,e.createElement)(n.DropdownMenu,{className:"eazydocs-toolbar__dropdown",icon:"ezd-icon",label:(0,t.__)("Insert EazyDocs Shortcode","eazydocs"),controls:[{title:(0,t.__)("Footnotes","eazydocs"),onClick:()=>{if(r)return void s((0,a.removeFormat)(i,l));const e=i.text.slice(i.start,i.end);let t="";const o=w;_(w+1),t=e?`[reference number="${o}"]${e}[/reference]`:`[reference number="${o}"][/reference]`,s((0,a.insert)(i,t))}},{title:(0,t.__)("Conditional Dropdown","eazydocs"),onClick:()=>{r?s((0,a.removeFormat)(i,l)):m(!0)}}]}))),d&&(0,e.createElement)(n.Popover,{className:"ezd-conditional-dropdown-tool",position:"bottom center",onClose:()=>m(!1)},(0,e.createElement)("select",{value:p,onChange:e=>u(e.target.value)},(0,e.createElement)("option",{value:""},"-- Select Option --"),y),(0,e.createElement)("button",{onClick:()=>(e=>{_(w+1);const t=i.text.slice(i.start,i.end);let o="";o=t?`[conditional_data dependency="${e}"]${t}[/conditional_data]`:`[conditional_data dependency="${e}"][/conditional_data]`,s((0,a.insert)(i,o)),m(!1)})(p)},"Insert")))}})})();