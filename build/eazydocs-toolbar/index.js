(()=>{"use strict";var e={n:o=>{var t=o&&o.__esModule?()=>o.default:()=>o;return e.d(t,{a:t}),t},d:(o,t)=>{for(var n in t)e.o(t,n)&&!e.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:t[n]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o)};const o=window.wp.element,t=window.wp.i18n,n=window.wp.blockEditor,a=window.wp.components,s=window.wp.richText,c=window.wp.apiFetch;var i=e.n(c);const d=window.ReactJSXRuntime,r="eazydocs/eazydocs-toolbar";(0,s.registerFormatType)(r,{title:(0,t.__)("EazyDocs Toolbar","eazydocs"),tagName:"span",className:"eazydocs-toolbar",edit:({isActive:e,value:c,onChange:l})=>{const[p,_]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),[m,z]=(0,o.useState)(""),[w,y]=(0,o.useState)(""),[b,x]=(0,o.useState)([]),j=eazydocs_local_object?.ezd_get_conditional_items||[],v=eazydocs_local_object?.is_ezd_pro_block;(0,o.useEffect)(()=>{i()({path:"/wp/v2/docs?per_page=100"}).then(e=>{x(e)})},[]);const g="yes"===eazydocs_local_object?.is_footnotes_unlocked;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.BlockControls,{children:(0,d.jsx)(a.ToolbarGroup,{children:(0,d.jsx)(a.DropdownMenu,{className:"eazydocs-toolbar__dropdown",icon:"ezd-icon",label:(0,t.__)("Insert EazyDocs Shortcode","eazydocs"),controls:[{title:(0,d.jsxs)("span",{className:"ezd-menu-item-label "+(g?"":"ezd-item-locked"),children:[(0,t.__)("Footnotes","eazydocs"),!g&&(0,d.jsx)("span",{className:"ezd-badge-promax",children:"Pro Max"})]}),onClick:()=>{if(!g)return void Swal.fire({title:"Opps...",html:'This is a Promax feature. You need to <a href="admin.php?page=eazydocs-pricing"><strong class="upgrade-link">Upgrade&nbsp;&nbsp;âž¤</strong></a> to the Premium Version to use this feature',icon:"warning",buttons:[!1,"Close"],dangerMode:!0});if(e)return void l((0,s.removeFormat)(c,r));const o=c.text.slice(c.start,c.end),t=o?`[reference]${o}[/reference]`:"[reference][/reference]";l((0,s.insert)(c,t))}},{title:(0,t.__)("Conditional Dropdown","eazydocs"),onClick:()=>{_(!0)}},...v?[{title:(0,t.__)("Embed Post","eazydocs"),onClick:()=>{h(!0)}}]:[]]})})}),p&&(0,d.jsxs)(a.Popover,{className:"ezd-conditional-dropdown-tool",position:"bottom center",onClose:()=>_(!1),children:[(0,d.jsx)("h4",{children:(0,t.__)("Select Condition","eazydocs")}),(0,d.jsxs)("select",{value:m,onChange:e=>z(e.target.value),children:[(0,d.jsx)("option",{value:"",children:(0,t.__)("-- Select Option --","eazydocs")}),j.map(e=>(0,d.jsx)("option",{value:e.value,children:e.title},e.id))]}),(0,d.jsx)("button",{onClick:()=>{if(!m)return;const e=c.text.slice(c.start,c.end),o=e?`[conditional_data dependency="${m}"]${e}[/conditional_data]`:`[conditional_data dependency="${m}"][/conditional_data]`;l((0,s.insert)(c,o)),_(!1)},children:(0,t.__)("Insert","eazydocs")})]}),u&&(0,d.jsxs)(a.Popover,{className:"ezd-embed-post-tool",position:"bottom center",onClose:()=>h(!1),children:[(0,d.jsx)("h4",{children:(0,t.__)("Select a Doc to Embed","eazydocs")}),(0,d.jsxs)("select",{value:w,onChange:e=>y(e.target.value),children:[(0,d.jsx)("option",{value:"",children:(0,t.__)("-- Select a Doc --","eazydocs")}),b.map(e=>(0,d.jsx)("option",{value:e.id,children:e.title.rendered},e.id))]}),(0,d.jsx)("button",{onClick:()=>{if(!w)return;const e=`[embed_post id="${w}"]`;l((0,s.insert)(c,e)),h(!1)},children:(0,t.__)("Insert","eazydocs")})]})]})}})})();