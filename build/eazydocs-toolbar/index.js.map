{"version":3,"file":"eazydocs-toolbar/index.js","mappings":"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","sources":["webpack://eazydocs/./src/eazydocs-toolbar/editor.scss","webpack://eazydocs/external window \"React\"","webpack://eazydocs/external window [\"wp\",\"blockEditor\"]","webpack://eazydocs/external window [\"wp\",\"components\"]","webpack://eazydocs/external window [\"wp\",\"element\"]","webpack://eazydocs/external window [\"wp\",\"i18n\"]","webpack://eazydocs/external window [\"wp\",\"richText\"]","webpack://eazydocs/webpack/bootstrap","webpack://eazydocs/webpack/runtime/compat get default export","webpack://eazydocs/webpack/runtime/define property getters","webpack://eazydocs/webpack/runtime/hasOwnProperty shorthand","webpack://eazydocs/webpack/runtime/make namespace object","webpack://eazydocs/./src/eazydocs-toolbar/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"richText\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { useState } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { BlockControls } from '@wordpress/block-editor';\r\nimport { Popover, ToolbarGroup, ToolbarButton, DropdownMenu } from '@wordpress/components';\r\nimport { insert, registerFormatType, removeFormat, toggleFormat } from '@wordpress/rich-text';\r\nimport './editor.scss';\r\n\r\nconst name = 'eazydocs/eazydocs-toolbar';\r\n\r\nconst EazyDocs_Toolbar = ({ isActive, value, onChange }) => {\r\n    const [showPopover, setShowPopover] = useState(false);\r\n    const [numberValue, setNumberValue] = useState('');\r\n    const [shortcodeCounter, setShortcodeCounter] = useState(1);\r\n    const conditionalItems = eazydocs_local_object.ezd_get_conditional_items;\r\n\r\n    const dataItems = conditionalItems.map((item) => (\r\n        <option key={item.id} value={item.value}>{item.title}</option>\r\n    ));\r\n    \r\n    // Footnotes\r\n    const reference = () => {\r\n        if (isActive) {\r\n            onChange(removeFormat(value, name));\r\n            return;\r\n        }\r\n\r\n        const selectedText  = value.text.slice(value.start, value.end);\r\n        let shortcode       = '';\r\n\r\n        // Get the number of footnotes in the editor\r\n        let shortcodeNumber = jQuery('.is-root-container p').text().match(/\\[reference number=\"(\\d+)\"\\]/g);\r\n        if (shortcodeNumber !== null) {\r\n            shortcodeNumber = shortcodeNumber.length + 1;\r\n        } else {\r\n            shortcodeNumber = 1;\r\n        }\r\n\r\n        // Wrap selected text with shortcode if text is selected\r\n        if (selectedText) {\r\n            shortcode = `[reference number=\"${shortcodeNumber}\"]${selectedText}[/reference]`;\r\n        } else {\r\n            // Insert shortcode at cursor position if no text is selected\r\n            shortcode = `[reference number=\"${shortcodeNumber}\"][/reference]`;\r\n        }\r\n        \r\n        onChange(insert(value, shortcode));\r\n    };\r\n  \r\n    // Conditional Dropdown\r\n    const conditional_data = () => {\r\n        if (isActive) {\r\n            onChange(removeFormat(value, name));\r\n            return;\r\n        }\r\n        setShowPopover(true);\r\n    };\r\n    \r\n    // Insert shortcode with the selected value into the rich text\r\n    const ezdToolbarDropDown = (selectedValue) => {\r\n        // Insert shortcode with the selected value into the rich text\r\n        const shortcodeNumber = shortcodeCounter;\r\n        setShortcodeCounter(shortcodeCounter + 1);\r\n\r\n        const selectedText  = value.text.slice(value.start, value.end);\r\n        let shortcode       = '';\r\n        \r\n        // Wrap selected text with shortcode if text is selected\r\n        if (selectedText) {\r\n            shortcode = `[conditional_data dependency=\"${selectedValue}\"]${selectedText}[/conditional_data]`;\r\n        } else {\r\n            // Insert shortcode at cursor position if no text is selected\r\n            shortcode = `[conditional_data dependency=\"${selectedValue}\"][/conditional_data]`;\r\n        }\r\n        \r\n        onChange(insert(value, shortcode));\r\n\r\n        // Hide the popover after insertion\r\n        setShowPopover(false);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <BlockControls>\r\n                <ToolbarGroup>\r\n                    <DropdownMenu\r\n                    className='eazydocs-toolbar__dropdown'                     \r\n                    icon= 'ezd-icon'\r\n                    label={__('Insert EazyDocs Shortcode', 'eazydocs')}\r\n                    controls={[                    \r\n                        {\r\n                            title: __('Footnotes', 'eazydocs'),\r\n                            onClick: reference\r\n                        },\r\n                        {\r\n                            title: __('Conditional Dropdown', 'eazydocs'),\r\n                            onClick: conditional_data,\r\n                        },\r\n                    ]}\r\n                    />\r\n                </ToolbarGroup>\r\n            </BlockControls>\r\n            \r\n            {showPopover && (\r\n                <Popover className='ezd-conditional-dropdown-tool' position=\"bottom center\" onClose={() => setShowPopover(false)}>\r\n                <select \r\n                    value={numberValue}\r\n                    onChange={(e) => setNumberValue(e.target.value)}\r\n                >\r\n                    <option value=\"\">-- Select Option --</option>\r\n                    {dataItems}\r\n                    </select>\r\n                <button onClick={() => ezdToolbarDropDown(numberValue)}>Insert</button>\r\n            </Popover>\r\n            )}\r\n            \r\n        </>\r\n    );\r\n};\r\n\r\nregisterFormatType(name, {\r\n    title: __('EazyDocs Toolbar', 'eazydocs'),\r\n    tagName: 'span',\r\n    className: 'eazydocs-toolbar',\r\n    edit: EazyDocs_Toolbar\r\n});"],"names":["useState","__","BlockControls","Popover","ToolbarGroup","ToolbarButton","DropdownMenu","insert","registerFormatType","removeFormat","toggleFormat","name","EazyDocs_Toolbar","isActive","value","onChange","showPopover","setShowPopover","numberValue","setNumberValue","shortcodeCounter","setShortcodeCounter","conditionalItems","eazydocs_local_object","ezd_get_conditional_items","dataItems","map","item","id","title","reference","selectedText","text","slice","start","end","shortcode","shortcodeNumber","jQuery","match","length","conditional_data","ezdToolbarDropDown","selectedValue","onClick","e","target","tagName","className","edit"],"sourceRoot":""}